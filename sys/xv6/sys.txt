# XV6 system call descriptions

# File open flags
define O_RDONLY		0
define O_WRONLY		1
define O_RDWR		2
define O_CREATE		0x200
define O_TRUNC		0x400

# File types
define T_DIR		1
define T_FILE		2
define T_DEV		3

# Types
type xv6_open_flags flags[O_RDONLY, O_WRONLY, O_RDWR, O_CREATE, O_TRUNC]
type filename stringnoz
type pid int32
type fd int32

# Resources
resource fd[0:15]

# Process management
fork() pid
exit(status int32)
wait() pid
getpid() pid

# File operations  
open(file ptr[in, filename], omode xv6_open_flags) fd
close(fd fd)
read(fd fd, buf buffer[out], n len[buf]) len[buf]
write(fd fd, buf buffer[in], n len[buf]) len[buf]

# File metadata
fstat(fd fd, st ptr[out, xv6_stat])

# File system operations
chdir(path ptr[in, filename])
mkdir(path ptr[in, filename])
mknod(path ptr[in, filename], major int16, minor int16)
unlink(path ptr[in, filename])
link(old ptr[in, filename], new ptr[in, filename])

# Process operations
exec(path ptr[in, filename], argv ptr[in, array[ptr[in, stringnoz]]])
kill(pid pid)
sleep(n int32)
uptime() int32

# I/O operations
dup(fd fd) fd
pipe(p ptr[out, array[fd, 2]])

# Memory management
sbrk(n intptr) intptr

# Data structures
xv6_stat {
	dev	int16
	ino	int16
	type	int16
	nlink	int16
	size	int64
}